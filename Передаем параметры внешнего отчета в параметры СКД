Функция ЗаполнитьПараметрыСКД(Объект, КомпоновщикНастроек) Экспорт
	Попытка
		Настройки                = КомпоновщикНастроек.Настройки;
		ЭлементыПараметров        = Настройки.ПараметрыДанных.Элементы;
		Для каждого ЭлементПараметра Из ЭлементыПараметров Цикл
			Если ЭлементПараметра.Использование Тогда
				// Если в реквизитах есть имя совпадающее с именем параметра - установим его значение
				ИмяПараметра    = Строка(ЭлементПараметра.Параметр);
				Если Объект.Метаданные().Реквизиты.Найти(ИмяПараметра) <> Неопределено Тогда
					
					Если ИмяПараметра = "Период" Тогда
						ЭлементПараметра.Значение = Новый Граница(КонецДня(ЭтотОбъект.Период), ВидГраницы.Включая);	
					КонецЕсли;
					Если ИмяПараметра = "Наши" Тогда
						ЭлементПараметра.Значение = Справочники.Контрагенты.НайтиПоНаименованию("НАШИ");	
					КонецЕсли;
					
					ЭлементПараметра.Значение = Объект[ИмяПараметра];
				КонецЕсли;
			КонецЕсли;
		КонецЦикла;
		ПараметрыЗаполнены = Истина;
	Исключение
		ПараметрыЗаполнены = Ложь;
	КонецПопытки;
	
	Возврат ПараметрыЗаполнены;
КонецФункции // ЗаполнитьПараметрыСКД()



Процедура ДействияФормыДействие(Кнопка)
	
	ТД    = ЭлементыФормы.Результат;
	ТД.Очистить();
	
	// Заполняем параметры по реквизитам
	Если Не ЗаполнитьПараметрыСКД(ЭтотОбъект, КомпоновщикНастроек) Тогда
		Возврат;       
	КонецЕсли;
	
	СкомпоноватьРезультат(ТД);
	
КонецПроцедуры 
